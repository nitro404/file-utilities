var async=require("async"),fs=require("fs-extra"),md5File=require("md5-file"),utilities=require("extra-utilities"),fileUtilities={getFileInformation:function(filePath,callback){if(!utilities.isFunction(callback))throw new Error("Missing or invalid callback function!");return utilities.isEmptyString(filePath)?callback(new Error("Missing or invalid file path!")):async.waterfall([function(callback){return fs.exists(filePath,function(exists){return callback(null,exists)})},function(exists,callback){return exists?fs.stat(filePath,function(error,stats){return error?callback(error):callback(null,stats.size)}):callback(null,null)},function(fileSize,callback){return utilities.isInvalid(fileSize)?callback(null,null,null):md5File(filePath,function(error,hash){return error?callback(error):callback(null,fileSize,hash)})}],function(error,fileSize,hash){return error?callback(error):utilities.isInvalid(fileSize)||utilities.isInvalid(hash)?callback(null,null):callback(null,{fileSize:fileSize,md5:hash})})}};module.exports=fileUtilities;